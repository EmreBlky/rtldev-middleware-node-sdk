
> @hexonet/ispapi-apiconnector@5.0.3 test /home/kai/git/node-sdk
> cross-env NODE_ENV=development nyc ./node_modules/.bin/_mocha --opts mocha.opts $(find ./test -type f -name '*.spec.js')



  ResponseParser namespace
    #.parse
      ✓ check return value [w/o DESCRIPTION]
    #.serialize
      ✓ check return value [w/ PROPERTY]
      ✓ check return value [w/o PROPERTY]
      ✓ check return value [w/o CODE, w/o DESCRIPTION]
      ✓ check return value [w/ QUEUETIME, w/ RUNTIME]

  Response class
    #.getCurrentPageNumber
      ✓ check return value [w/ entries in response]
      ✓ check return value [w/o entries in response]
    #.getFirstRecordIndex
      ✓ check return value [w/o FIRST in response, no rows]
      ✓ check return value [w/o FIRST in response, rows]
    #.getColumns
      ✓ check return value
    #.getColumnIndex
      ✓ check return value [colum exists]
      ✓ check return value [colum does not exist]
    #.getColumnKeys
      ✓ check return value
    #.getCurrentRecord
      ✓ check return value
      ✓ check return value [no records available]
    #.getListHash
      ✓ check return value
    #.getNextRecord
      ✓ check return value
    #.getPagination
      ✓ check return value [next record]
    #.getPreviousRecord
      ✓ check return value
    #.hasNextPage
      ✓ check return value [no rows]
      ✓ check return value [rows]
    #.hasPreviousPage
      ✓ check return value [no rows]
      ✓ check return value [rows]
    #.getLastRecordIndex
      ✓ check return value [no rows]
      ✓ check return value [w/o LAST in response, rows]
    #.getNextPageNumber
      ✓ check return value [no rows]
      ✓ check return value [rows]
    #.getNumberOfPages
      ✓ check return value [no rows]
    #.getPreviousPageNumber
      ✓ check return value [no rows]
      ✓ check return value [rows]
    #.rewindRecordList
      ✓ check return value

  Record class
    #.getData
      ✓ check return value
    #.getDataByKey
      ✓ check return value [column key not found]

  ResponseTemplate class
    #.constructor
      ✓ check instance [raw empty string]
    #.getHash
      ✓ check return value
    #.getQueuetime
      ✓ check return value [n/a in API response]
      ✓ check return value [in API response]
    #.getRuntime
      ✓ check return value [n/a in API response]
      ✓ check return value [in API response]

  ResponseTemplateManager class
    #.getTemplate
      ✓ check return value [template not found]
    #.getTemplates
      ✓ check return value
    #.isTemplateMatchHash
      ✓ check return value [matched]
    #.isTemplateMatchPlain
      ✓ check return value [matched]

  APIClient class
    #.getPOSTData
      ✓ test object input with special chars
      ✓ test string input
      ✓ test object input with null value in parameter
      ✓ test object input with undefined value in parameter
    #.enableDebugMode
      ✓ activate debug mode
    #.enableDebugMode
      ✓ deactivate debug mode
    #.getURL
      ✓ validate default socket url
    #.setURL
      ✓ validate http socket url
    #.setOTP
      ✓ validate getPOSTData response [otp set] 
      ✓ validate getPOSTData response [otp reset]
    #.setSession
      ✓ validate getPOSTData response [session set] 
      ✓ validate getPOSTData response [credentials and session set] 
      ✓ validate getPOSTData response [session reset]
    #.saveSession/reuseSession
      ✓ validate correct settings
    #.setRemoteIPAddress
      ✓ validate getPOSTData response [ip set] 
      ✓ validate getPOSTData response [ip reset]
    #.setCredentials
      ✓ validate getPOSTData response [credentials set] 
      ✓ validate getPOSTData response [session reset]
    #.setRoleCredentials
      1) validate getPOSTData response [role credentials set] 

  61 passing (76ms)
  1 failing

  1) APIClient class
       #.setRoleCredentials
         validate getPOSTData response [role credentials set] :

      AssertionError: expected 's_entity=54cd&s_login=myaccountid%21myroleid&s_pw=mypassword&s_command=COMMAND%3DStatusAccount' to equal 's_entity=54cd&s_login=myaccountid!myroleid&s_pw=mypassword&s_command=COMMAND%3DStatusAccount'      
      actual expected
      
      s_entity=54cd&s_login=myaccountid%21myroleid!myroleid&s_pw=mypassword&s_command=COMMAND%3DStatusAccount
      
      at Context.<anonymous> (test/apiclient.spec.js:203:22)




----------------------------|----------|----------|----------|----------|-------------------|
File                        |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |
----------------------------|----------|----------|----------|----------|-------------------|
All files                   |    79.07 |    71.93 |       80 |    79.07 |                   |
 apiclient.ts               |    40.35 |    20.45 |    51.72 |    40.35 |... 66,367,368,370 |
 column.ts                  |       75 |      100 |       60 |       75 |             29,37 |
 index.ts                   |      100 |      100 |      100 |      100 |                   |
 record.ts                  |    85.71 |       50 |      100 |    85.71 |                14 |
 response.ts                |    96.69 |    85.51 |    94.12 |    96.69 |   136,300,301,303 |
 responseparser.ts          |      100 |      100 |      100 |      100 |                   |
 responsetemplate.ts        |       85 |      100 |       70 |       85 |         89,98,107 |
 responsetemplatemanager.ts |      100 |      100 |      100 |      100 |                   |
 socketconfig.ts            |    93.88 |    85.71 |    92.31 |    93.88 |        75,169,170 |
----------------------------|----------|----------|----------|----------|-------------------|
