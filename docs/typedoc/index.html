<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@hexonet/ispapi-apiconnector</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@hexonet/ispapi-apiconnector</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> @hexonet/ispapi-apiconnector</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h1 id="node-sdk">node-sdk</h1>
				<p><a href="https://www.npmjs.com/package/@hexonet/ispapi-apiconnector"><img src="https://img.shields.io/npm/v/@hexonet/ispapi-apiconnector.svg?style=flat" alt="npm version"></a>
					<a href="https://www.npmjs.com/package/@hexonet/ispapi-apiconnector"><img src="https://img.shields.io/node/v/@hexonet/ispapi-apiconnector.svg" alt="node"></a>
					<a href="https://travis-ci.org/hexonet/node-sdk"><img src="https://travis-ci.org/hexonet/node-sdk.svg?branch=master" alt="build"></a>
					<a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="License: MIT"></a>
					<a href="https://github.com/hexonet/node-sdk/blob/master/CONTRIBUTING.md"><img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg" alt="PRs welcome"></a>
				<a href="https://hexonet-sdk.slack.com/messages/CBFDZ6G3W"><img src="https://camo.githubusercontent.com/984828c0b020357921853f59eaaa65aaee755542/68747470733a2f2f73332e65752d63656e7472616c2d312e616d617a6f6e6177732e636f6d2f6e6774756e612f6a6f696e2d75732d6f6e2d736c61636b2e706e67" alt="Slack Widget"></a> <a href="https://greenkeeper.io/"><img src="https://badges.greenkeeper.io/hexonet/node-sdk.svg" alt="Greenkeeper badge"></a></p>
				<p>This module is a connector library for the insanely fast HEXONET Backend API. For further informations visit our <a href="https://www.hexonet.net">homepage</a> and do not hesitate to <a href="https://www.hexonet.net/contact">contact us</a>.</p>
				<h2 id="resources">Resources</h2>
				<ul>
					<li><a href="https://github.com/hexonet/node-sdk/blob/master/README.md#how-to-use-this-module-in-your-project">Usage Guide</a></li>
					<li><a href="https://github.com/hexonet/node-sdk/wiki/Migration-Guide">Migration Guide</a></li>
					<li><a href="http://rawgit.com/hexonet/node-sdk/master/docs/typedoc/index.html">SDK Documenation</a></li>
					<li><a href="https://github.com/hexonet/hexonet-api-documentation/tree/master/API">HEXONET Backend API Documentation</a></li>
					<li><a href="https://github.com/hexonet/node-sdk/releases">Release Notes</a></li>
					<li><a href="https://github.com/hexonet/node-sdk/wiki/Development-Guide">Development Guide</a></li>
				</ul>
				<h2 id="how-to-use-this-module-in-your-project">How to use this module in your project</h2>
				<p>We have also a demo app available showing how to integrate and use our SDK. See <a href="https://github.com/hexonet/node-sdk-demo">here</a>.</p>
				<h3 id="requirements">Requirements</h3>
				<ul>
					<li>Installed nodejs/npm. We suggest using <a href="https://github.com/creationix/nvm">nvm</a>.</li>
				</ul>
				<h3 id="nodejs-version-compatibility">NodeJS Version Compatibility</h3>
				<table>
					<thead>
						<tr>
							<th>Version</th>
							<th>NodeJS</th>
						</tr>
					</thead>
					<tbody><tr>
							<td>4.x and below</td>
							<td>&gt;= 4.x</td>
						</tr>
						<tr>
							<td>5.0.0 - 5.0.1</td>
							<td>&gt;= 7.6.0</td>
						</tr>
						<tr>
							<td>&gt;= 5.0.2</td>
							<td>&gt;= 8.3.0</td>
						</tr>
				</tbody></table>
				<h3 id="installation-update">Installation / Update</h3>
				<pre><code class="language-bash">    npm i @hexonet/ispapi-apiconnector@latest --save</code></pre>
				<h3 id="usage-examples">Usage Examples</h3>
				<p>We provide only documentation and examples for the latest release.</p>
				<h4 id="api-response-format">API response format</h4>
				<p>If you got the API communication working, you will notice that we provide two response formats via this library.
					a) Plain Format
					b) Hash Format
				c) ListHash Format</p>
				<p>The different response formats can be accessed through the Response object itself that is returned by login, logout and request method:</p>
				<pre><code class="language-js"><span class="hljs-comment">// console.log(r.getPlain())</span>
<span class="hljs-comment">// console.log(r.getHash())</span>
<span class="hljs-comment">// console.log(l.getListHash())</span></code></pre>
				<p>The plain format represents the API plain response.
					The hash format represents the API response parsed into a js object.
				The list format makes sense, if you&#39;re working with table libraries based on our list commands and need the hash format parsed into a list format.</p>
				<h4 id="api-response-codes">API response codes</h4>
				<p>The API response (a JSON object) provides always two keys: CODE and DESCRIPTION.
					CODE represents a return code which indicates the following cases:
					&quot;200&quot; -&gt; The command has been processed successfully by the API
					&quot;4xx&quot; -&gt; A temporary API error occured, retry later
				&quot;5xx&quot; -&gt; An API error occured</p>
				<p>In case of a (temporary) error the DESCRIPTION may provide more details on the reason.</p>
				<p>The hash format provides a PROPERTY key that covers potential data.
				The list format provides a LIST key that covers potential data.</p>
				<h4 id="session-based-api-communication">Session based API Communication</h4>
				<p>This example is thought for anyone who builds up his own frontend including user login and logout functionality.
					See how login and logout works and how the request method depends on the login mechanism!
					The logout can be done at any time separetely triggered. After logout no further requests reusing the by login returned socketcfg are possible.
				Note: you have to first finish your requests before doing logout. Running queued requests may fail after logout.</p>
				<pre><code class="language-js"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> apiconnector = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@hexonet/ispapi-apiconnector'</span>)
  <span class="hljs-keyword">const</span> cl = <span class="hljs-keyword">new</span> apiconnector.APIClient()
  <span class="hljs-comment">// Use OT&amp;E system, omitting this points by default to the LIVE system</span>
  cl.useOTESystem()
  <span class="hljs-comment">// Set your user id, here: the OT&amp;E demo user</span>
    .setCredentials(<span class="hljs-string">'test.user'</span>, <span class="hljs-string">'test.passw0rd'</span>)
  <span class="hljs-comment">// Set Remote IP Address (in case of IP Filter setting)</span>
    .setRemoteIPAddress(<span class="hljs-string">'1.2.3.4:80'</span>)
  <span class="hljs-comment">// Set a subuser view</span>
  <span class="hljs-comment">// cl.setUserView('hexotestman.com');</span>

  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'login ...'</span>)
  <span class="hljs-keyword">let</span> r = <span class="hljs-keyword">await</span> cl.login()
  <span class="hljs-comment">// Provide an one time password (active 2FA)</span>
  <span class="hljs-comment">// const r = await cl.login('12345678');</span>
  <span class="hljs-keyword">if</span> (r.getCode() !== <span class="hljs-number">200</span>) { <span class="hljs-comment">// login failed</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`LOGIN FAILED -&gt; <span class="hljs-subst">${r.getCode()}</span> <span class="hljs-subst">${r.getDescription()}</span>`</span>)
    <span class="hljs-keyword">return</span>
  }
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'LOGIN SUCCEEDED'</span>)

  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'request further commands ...'</span>)
  r = <span class="hljs-keyword">await</span> cl.request({
    <span class="hljs-attr">COMMAND</span>: <span class="hljs-string">'StatusUser'</span>
  })
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`RESPONSE -&gt; <span class="hljs-subst">${r.getCode()}</span> <span class="hljs-subst">${r.getDescription()}</span>`</span>)

  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'logout ...'</span>)
  r = <span class="hljs-keyword">await</span> cl.logout()
  <span class="hljs-keyword">if</span> (r.getCode() !== <span class="hljs-string">'200'</span>) { <span class="hljs-comment">// login failed</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`LOGOUT FAILED -&gt; <span class="hljs-subst">${r.getCode()}</span> <span class="hljs-subst">${r.getDescription()}</span>`</span>)
    <span class="hljs-keyword">return</span>
  }
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'LOGOUT SUCCEEDED'</span>)
}
main()</code></pre>
				<h5 id="create-your-own-frontend-app-on-top">Create your own frontend app on top</h5>
				<p>If you want to create your own frontend application based on our SDK, you will have to know how you can
					save APIClient&#39;s session configuration data to the nodejs session and how to rebuild a new APIClient
				instance out of it on next incoming request.</p>
				<p>After successful login, use <code>cl.saveSession(req.session)</code> to save APIClient&#39;s session into the nodejs one.
					This snippet is an example for the expressjs framework where <code>req</code> is the incoming ClientRequest and
				<code>req.session</code> the expressjs session instance.</p>
				<p>In your generic route for making API calls use <code>cl.reuseSession(req.session)</code> to rebuild APIClient&#39;s session
				out of the previously saved data.</p>
				<p>We cannot provide integration examples for part depends on your app itself and your own needs.
				Still feel free to contact us in case you&#39;re stuck.</p>
				<h4 id="sessionless-api-communication">Sessionless API Communication</h4>
				<p>In the below example no login / logout procedure is required.
					This is thought for cases where a user session is not of interest.
					But in that case you always have to provide user and password accordingly.
				If you want to build your frontend based on this library, we suggest to base it on the above example.</p>
				<pre><code class="language-js"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> apiconnector = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@hexonet/ispapi-apiconnector'</span>)
  <span class="hljs-keyword">const</span> cl = <span class="hljs-keyword">new</span> apiconnector.APIClient()
  <span class="hljs-comment">// Use OT&amp;E system, omitting this points by default to the LIVE system</span>
  cl.useOTESystem()
  <span class="hljs-comment">// Set your user id, here: the OT&amp;E demo user</span>
    .setCredentials(<span class="hljs-string">'test.user'</span>, <span class="hljs-string">'test.passw0rd'</span>)
  <span class="hljs-comment">// Set Remote IP Address (in case of IP Filter setting)</span>
    .setRemoteIPAddress(<span class="hljs-string">'1.2.3.4:80'</span>)
  <span class="hljs-comment">// Set a subuser view</span>
  <span class="hljs-comment">// .setUserView('hexotestman.com')</span>
  <span class="hljs-comment">// Set a one time password (active 2FA)</span>
  <span class="hljs-comment">// .setOTP('12345678')</span>

  <span class="hljs-keyword">const</span> r = cl.request({
    <span class="hljs-attr">COMMAND</span>: <span class="hljs-string">'StatusUser'</span>
  })
  <span class="hljs-built_in">console</span>.log(r.getPlain())
}
main()</code></pre>
				<h3 id="promise-based">Promise based</h3>
				<p>No need to play with async / await.</p>
				<pre><code class="language-js"><span class="hljs-keyword">const</span> apiconnector = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@hexonet/ispapi-apiconnector'</span>)
<span class="hljs-keyword">const</span> cl = <span class="hljs-keyword">new</span> apiconnector.APIClient()
<span class="hljs-comment">// Use OT&amp;E system, omitting this points by default to the LIVE system</span>
cl.useOTESystem()
<span class="hljs-comment">// Set your user id, here: the OT&amp;E demo user</span>
cl.setCredentials(<span class="hljs-string">'test.user'</span>, <span class="hljs-string">'test.passw0rd'</span>)
<span class="hljs-comment">// Set Remote IP Address (in case of IP Filter setting)</span>
cl.setRemoteIPAddress(<span class="hljs-string">'1.2.3.4:80'</span>)
<span class="hljs-comment">// Set a subuser view</span>
<span class="hljs-comment">// cl.setUserView('hexotestman.com');</span>
<span class="hljs-comment">// Set a one time password (active 2FA)</span>
<span class="hljs-comment">// cl.setOTP('12345678');</span>

cl.request({
  <span class="hljs-attr">COMMAND</span>: <span class="hljs-string">'StatusUser'</span>
}).then(<span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(r.getPlain())
})</code></pre>
				<h3 id="use-of-method-chaining">Use of method chaining</h3>
				<p>Shorten your code by using method chaining</p>
				<pre><code class="language-js"><span class="hljs-keyword">const</span> apiconnector = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@hexonet/ispapi-apiconnector'</span>)
<span class="hljs-keyword">const</span> cl = <span class="hljs-keyword">new</span> apiconnector.APIClient()
cl.useOTESystem()
  .setCredentials(<span class="hljs-string">'test.user'</span>, <span class="hljs-string">'test.passw0rd'</span>)
  .setRemoteIPAddress(<span class="hljs-string">'1.2.3.4:80'</span>)
<span class="hljs-comment">// .setUserView('hexotestman.com');</span>
<span class="hljs-comment">// .setOTP('12345678');</span>

cl.request({
  <span class="hljs-attr">COMMAND</span>: <span class="hljs-string">'StatusUser'</span>
}).then(<span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(r.getPlain())
})</code></pre>
				<h2 id="contributing">Contributing</h2>
				<p>Please read <a href="https://github.com/hexonet/node-sdk/wiki/Development-Guide">our development guide</a> for details on our code of conduct, and the process for submitting pull requests to us.</p>
				<h2 id="authors">Authors</h2>
				<ul>
					<li><strong>Kai Schwarz</strong> - <em>lead development</em> - <a href="https://github.com/papakai">PapaKai</a></li>
				</ul>
				<p>See also the list of <a href="https://github.com/hexonet/node-sdk/graphs/contributors">contributors</a> who participated in this project.</p>
				<h2 id="license">License</h2>
				<p>MIT</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/responseparser.html">Response<wbr>Parser</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class">
						<a href="classes/apiclient.html" class="tsd-kind-icon">APIClient</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/column.html" class="tsd-kind-icon">Column</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/record.html" class="tsd-kind-icon">Record</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/response.html" class="tsd-kind-icon">Response</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/responsetemplate.html" class="tsd-kind-icon">Response<wbr>Template</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/responsetemplatemanager.html" class="tsd-kind-icon">Response<wbr>Template<wbr>Manager</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/socketconfig.html" class="tsd-kind-icon">Socket<wbr>Config</a>
					</li>
					<li class=" tsd-kind-variable tsd-is-not-exported">
						<a href="globals.html#rtm" class="tsd-kind-icon">rtm</a>
					</li>
					<li class=" tsd-kind-function tsd-is-not-exported">
						<a href="globals.html#defaultlogger" class="tsd-kind-icon">default<wbr>Logger</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#fixedurlenc" class="tsd-kind-icon">fixedURLEnc</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>